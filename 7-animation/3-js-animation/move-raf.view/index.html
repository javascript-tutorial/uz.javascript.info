<!DOCTYPE html>
<html>
  <head>
    <style>
      #train {
        position: relative;
        cursor: pointer;
      }
    </style>
  </head>

  <body>
    <img id="train" src="https://en.js.cx/clipart/train.gif" />

    <script>
      train.onclick = function () {
        animate(function (progress) {
          train.style.left = progress * 400 + "px";
        }, 2000);
      };

      function animate(draw, duration) {
        let start = performance.now();

        requestAnimationFrame(function animate(time) {
          // boshidan qancha vaqt o'tdi?
          let timePassed = time - start;

          if (timePassed > duration) timePassed = duration;

          // taraqqiyot 0 dan 1 gacha, o'tgan vaqtning ulushi
          let progress = duration / timePassed;

          // animatsiya jarayonini chizish
          draw(progress);

          // agar vaqt tugamagan bo'lsa - yana bir yugurishni rejalashtiring
          if (timePassed < duration) {
            requestAnimationFrame(animate);
          }
        });
      }
    </script>
  </body>
</html>
